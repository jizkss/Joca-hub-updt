-- CONFIGURAÇÃO
local IMAGE_ASSET_ID = "rbxassetid://115538776946656" -- Troque se necessário

-- SERVIÇOS
local UIS = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- GUI PRINCIPAL
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "JocaHubGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer.PlayerGui

-- ÍCONE DE ABRIR/FECHAR (ARRASTÁVEL)
local IconButton = Instance.new("ImageButton")
IconButton.Name = "OpenCloseButton"
IconButton.Size = UDim2.new(0, 52, 0, 52)
IconButton.Position = UDim2.new(0, 20, 1, -72)
IconButton.AnchorPoint = Vector2.new(0, 1)
IconButton.BackgroundTransparency = 1
IconButton.Image = IMAGE_ASSET_ID
IconButton.Parent = ScreenGui
IconButton.ZIndex = 10

-- Sombra Ícone
local IconShadow = Instance.new("ImageLabel")
IconShadow.Name = "IconShadow"
IconShadow.BackgroundTransparency = 1
IconShadow.Image = "rbxassetid://1316045217"
IconShadow.Size = UDim2.new(1, 22, 1, 22)
IconShadow.Position = UDim2.new(0, -11, 0, -11)
IconShadow.ImageTransparency = 0.85
IconShadow.ImageColor3 = Color3.new(0,0,0)
IconShadow.ZIndex = 9
IconShadow.Parent = IconButton

-- Arrasto do ícone
local iconDragging = false
local iconDragStart
local iconStartPos

IconButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        iconDragging = true
        iconDragStart = input.Position
        iconStartPos = IconButton.Position
    end
end)
IconButton.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        iconDragging = false
    end
end)
UIS.InputChanged:Connect(function(input)
    if iconDragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - iconDragStart
        local newPos = iconStartPos + UDim2.new(0, delta.X, 0, delta.Y)
        newPos = UDim2.new(
            0, math.clamp(newPos.X.Offset, 0, ScreenGui.AbsoluteSize.X - IconButton.AbsoluteSize.X),
            0, math.clamp(newPos.Y.Offset, 0, ScreenGui.AbsoluteSize.Y - IconButton.AbsoluteSize.Y)
        )
        IconButton.Position = UDim2.new(0, newPos.X.Offset, 0, newPos.Y.Offset)
        IconButton.AnchorPoint = Vector2.new(0, 0)
        IconShadow.Position = UDim2.new(0, -11, 0, -11)
    end
end)

-- MENU PRINCIPAL
local MainFrame = Instance.new("Frame")
MainFrame.Name = "JocaHubMain"
MainFrame.Size = UDim2.new(0, 400, 0, 370)
MainFrame.Position = UDim2.new(0, 90, 1, -390)
MainFrame.AnchorPoint = Vector2.new(0, 1)
MainFrame.BackgroundColor3 = Color3.fromRGB(240, 240, 255)
MainFrame.BackgroundTransparency = 0.08
MainFrame.Visible = false
MainFrame.Parent = ScreenGui
MainFrame.Active = true

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 18)
MainCorner.Parent = MainFrame

local MainShadow = Instance.new("ImageLabel")
MainShadow.Name = "MainShadow"
MainShadow.BackgroundTransparency = 1
MainShadow.Image = "rbxassetid://1316045217"
MainShadow.Size = UDim2.new(1, 28, 1, 28)
MainShadow.Position = UDim2.new(0, -14, 0, -14)
MainShadow.ImageTransparency = 0.8
MainShadow.ImageColor3 = Color3.new(0,0,0)
MainShadow.ZIndex = 0
MainShadow.Parent = MainFrame

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, 0, 0, 54)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "Joca hub"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 28
Title.TextColor3 = Color3.fromRGB(55, 20, 90)
Title.TextStrokeTransparency = 0.9
Title.TextYAlignment = Enum.TextYAlignment.Center
Title.TextXAlignment = Enum.TextXAlignment.Center
Title.Parent = MainFrame
Title.ZIndex = 2

-- Abas (AGORA COM 4 CATEGORIAS)
local categories = {"ESP", "Aimbot", "Misc", "Teleport"}
local buttons, categoryFrames = {}, {}
local selectedCategory = 1

-- Container para os botões das abas (para centralização)
local TabsContainer = Instance.new("Frame")
TabsContainer.Size = UDim2.new(1, -80, 0, 34)
TabsContainer.Position = UDim2.new(0, 40, 0, 62)
TabsContainer.BackgroundTransparency = 1
TabsContainer.Parent = MainFrame
TabsContainer.ZIndex = 2

local TabsLayout = Instance.new("UIListLayout")
TabsLayout.FillDirection = Enum.FillDirection.Horizontal
TabsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
TabsLayout.VerticalAlignment = Enum.VerticalAlignment.Center
TabsLayout.Padding = UDim.new(0, 8)
TabsLayout.Parent = TabsContainer

for i, name in ipairs(categories) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 85, 0, 34)
    btn.BackgroundColor3 = i == 1 and Color3.fromRGB(220,200,255) or Color3.fromRGB(235,235,255)
    btn.TextColor3 = i == 1 and Color3.fromRGB(55, 20, 90) or Color3.fromRGB(60, 60, 80)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 16
    btn.Text = name
    btn.Parent = TabsContainer
    btn.AutoButtonColor = true
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 10)
    btnCorner.Parent = btn
    buttons[i] = btn

    -- Frame de conteúdo da categoria
    local catFrame = Instance.new("Frame")
    catFrame.Size = UDim2.new(1, -40, 1, -120)
    catFrame.Position = UDim2.new(0, 20, 0, 108)
    catFrame.BackgroundTransparency = 1
    catFrame.Visible = i == 1
    catFrame.Parent = MainFrame
    catFrame.ZIndex = 2
    categoryFrames[i] = catFrame
end

-- Função para trocar abas
local function updateCategory(idx)
    selectedCategory = idx
    for i, btn in ipairs(buttons) do
        btn.BackgroundColor3 = i == idx and Color3.fromRGB(220,200,255) or Color3.fromRGB(235,235,255)
        btn.TextColor3 = i == idx and Color3.fromRGB(55, 20, 90) or Color3.fromRGB(60, 60, 80)
        categoryFrames[i].Visible = i == idx
    end
end

for i, btn in ipairs(buttons) do
    btn.MouseButton1Click:Connect(function()
        updateCategory(i)
    end)
end

updateCategory(1)

-- DRAG & DROP do menu
local dragging = false
local dragStart
local startPos
MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 and input.Position.Y < MainFrame.AbsolutePosition.Y + 54 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        MainFrame.BackgroundTransparency = 0.20
    end
end)
MainFrame.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
        MainFrame.BackgroundTransparency = 0.08
    end
end)
UIS.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        local newPos = startPos + UDim2.new(0, delta.X, 0, delta.Y)
        newPos = UDim2.new(
            0, math.clamp(newPos.X.Offset, 0, ScreenGui.AbsoluteSize.X - MainFrame.AbsoluteSize.X),
            0, math.clamp(newPos.Y.Offset, 0, ScreenGui.AbsoluteSize.Y - MainFrame.AbsoluteSize.Y)
        )
        MainFrame.Position = UDim2.new(0, newPos.X.Offset, 0, newPos.Y.Offset)
        MainFrame.AnchorPoint = Vector2.new(0, 0)
    end
end)

-- ABRIR/FECHAR MENU PELO ÍCONE
IconButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)
UIS.InputBegan:Connect(function(input, gp)
    if not gp and input.KeyCode == Enum.KeyCode.Escape then
        MainFrame.Visible = false
    end
end)

-- =============== ABA TELEPORT ================
local TeleportContainer = Instance.new("Frame")
TeleportContainer.Size = UDim2.new(1, 0, 1, 0)
TeleportContainer.BackgroundTransparency = 1
TeleportContainer.Parent = categoryFrames[4]

-- Título
local teleportTitle = Instance.new("TextLabel")
teleportTitle.Size = UDim2.new(1, 0, 0, 30)
teleportTitle.Position = UDim2.new(0, 0, 0, 0)
teleportTitle.BackgroundTransparency = 1
teleportTitle.Text = "TELEPORTAR PARA JOGADORES"
teleportTitle.Font = Enum.Font.GothamBold
teleportTitle.TextSize = 18
teleportTitle.TextColor3 = Color3.fromRGB(55, 20, 90)
teleportTitle.TextXAlignment = Enum.TextXAlignment.Center
teleportTitle.Parent = TeleportContainer

-- Botão de Refresh
local refreshButton = Instance.new("TextButton")
refreshButton.Size = UDim2.new(0, 120, 0, 30)
refreshButton.Position = UDim2.new(0.5, -60, 0, 35)
refreshButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
refreshButton.TextColor3 = Color3.fromRGB(55, 20, 90)
refreshButton.Font = Enum.Font.GothamBold
refreshButton.TextSize = 16
refreshButton.Text = "Atualizar Lista"
refreshButton.Parent = TeleportContainer
local refreshCorner = Instance.new("UICorner")
refreshCorner.CornerRadius = UDim.new(0, 8)
refreshCorner.Parent = refreshButton

-- Frame da lista de jogadores
local playersFrame = Instance.new("ScrollingFrame")
playersFrame.Size = UDim2.new(1, 0, 0, 200)
playersFrame.Position = UDim2.new(0, 0, 0, 70)
playersFrame.BackgroundTransparency = 1
playersFrame.BorderSizePixel = 0
playersFrame.ScrollBarThickness = 6
playersFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
playersFrame.Parent = TeleportContainer

local playersLayout = Instance.new("UIListLayout")
playersLayout.Padding = UDim.new(0, 5)
playersLayout.SortOrder = Enum.SortOrder.LayoutOrder
playersLayout.Parent = playersFrame

-- Botões de ação
local teleportButton = Instance.new("TextButton")
teleportButton.Size = UDim2.new(0, 140, 0, 35)
teleportButton.Position = UDim2.new(0.5, -150, 0, 280)
teleportButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
teleportButton.TextColor3 = Color3.fromRGB(55, 20, 90)
teleportButton.Font = Enum.Font.GothamBold
teleportButton.TextSize = 16
teleportButton.Text = "Teleportar"
teleportButton.Parent = TeleportContainer
local teleportCorner = Instance.new("UICorner")
teleportCorner.CornerRadius = UDim.new(0, 8)
teleportCorner.Parent = teleportButton

local tweenButton = Instance.new("TextButton")
tweenButton.Size = UDim2.new(0, 140, 0, 35)
tweenButton.Position = UDim2.new(0.5, 10, 0, 280)
tweenButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
tweenButton.TextColor3 = Color3.fromRGB(55, 20, 90)
tweenButton.Font = Enum.Font.GothamBold
tweenButton.TextSize = 16
tweenButton.Text = "Tween"
tweenButton.Parent = TeleportContainer
local tweenCorner = Instance.new("UICorner")
tweenCorner.CornerRadius = UDim.new(0, 8)
tweenCorner.Parent = tweenButton

-- Status
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, -20, 0, 40)
statusLabel.Position = UDim2.new(0, 10, 0, 320)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Selecione um jogador da lista"
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 14
statusLabel.TextColor3 = Color3.fromRGB(55, 20, 90)
statusLabel.TextXAlignment = Enum.TextXAlignment.Center
statusLabel.TextWrapped = true
statusLabel.Parent = TeleportContainer

-- Variáveis
local selectedPlayer = nil
local playerButtons = {}

-- Função para carregar a lista de jogadores
local function loadPlayersList()
    -- Limpar lista anterior
    for _, button in ipairs(playerButtons) do
        button:Destroy()
    end
    playerButtons = {}
    
    -- Obter jogadores
    local players = Players:GetPlayers()
    
    for _, player in ipairs(players) do
        if player ~= LocalPlayer then
            local playerButton = Instance.new("TextButton")
            playerButton.Size = UDim2.new(1, -10, 0, 30)
            playerButton.BackgroundColor3 = Color3.fromRGB(240, 240, 255)
            playerButton.TextColor3 = Color3.fromRGB(55, 20, 90)
            playerButton.Font = Enum.Font.Gotham
            playerButton.TextSize = 14
            playerButton.Text = player.Name
            playerButton.LayoutOrder = #playerButtons + 1
            playerButton.Parent = playersFrame
            
            local buttonCorner = Instance.new("UICorner")
            buttonCorner.CornerRadius = UDim.new(0, 6)
            buttonCorner.Parent = playerButton
            
            playerButton.MouseButton1Click:Connect(function()
                -- Desselecionar anterior
                if selectedPlayer then
                    for _, btn in ipairs(playerButtons) do
                        btn.BackgroundColor3 = Color3.fromRGB(240, 240, 255)
                    end
                end
                
                -- Selecionar novo
                selectedPlayer = player
                playerButton.BackgroundColor3 = Color3.fromRGB(220, 200, 255)
                statusLabel.Text = "Selecionado: " .. player.Name
            end)
            
            table.insert(playerButtons, playerButton)
        end
    end
    
    if #players == 1 then
        statusLabel.Text = "Nenhum outro jogador no servidor"
    else
        statusLabel.Text = "Selecione um jogador da lista"
    end
end

-- Função de teleport
local function teleportToPlayer()
    if not selectedPlayer then
        statusLabel.Text = "Selecione um jogador primeiro!"
        return
    end
    
    if not selectedPlayer.Character then
        statusLabel.Text = "Jogador não tem personagem!"
        return
    end
    
    local humanoidRootPart = selectedPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then
        statusLabel.Text = "Não foi possível encontrar o jogador!"
        return
    end
    
    if not LocalPlayer.Character then
        statusLabel.Text = "Seu personagem não existe!"
        return
    end
    
    local myRootPart = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not myRootPart then
        statusLabel.Text = "Não foi possível teletransportar!"
        return
    end
    
    -- Teleportar
    myRootPart.CFrame = humanoidRootPart.CFrame
    statusLabel.Text = "Teleportado para " .. selectedPlayer.Name
end

-- Função de Tween (movimento suave)
local function tweenToPlayer()
    if not selectedPlayer then
        statusLabel.Text = "Selecione um jogador primeiro!"
        return
    end
    
    if not selectedPlayer.Character then
        statusLabel.Text = "Jogador não tem personagem!"
        return
    end
    
    local humanoidRootPart = selectedPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then
        statusLabel.Text = "Não foi possível encontrar o jogador!"
        return
    end
    
    if not LocalPlayer.Character then
        statusLabel.Text = "Seu personagem não existe!"
        return
    end
    
    local myRootPart = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not myRootPart then
        statusLabel.Text = "Não foi possível mover!"
        return
    end
    
    -- Usar TweenService para movimento suave
    local tweenInfo = TweenInfo.new(
        2, -- Duração
        Enum.EasingStyle.Quad, -- Estilo
        Enum.EasingDirection.Out, -- Direção
        0, -- Repetições
        false, -- Reverte
        0 -- Delay
    )
    
    local goal = {}
    goal.CFrame = humanoidRootPart.CFrame
    
    local tween = TweenService:Create(myRootPart, tweenInfo, goal)
    tween:Play()
    
    statusLabel.Text = "Movendo suavemente para " .. selectedPlayer.Name
end

-- Conectar eventos
refreshButton.MouseButton1Click:Connect(loadPlayersList)
teleportButton.MouseButton1Click:Connect(teleportToPlayer)
tweenButton.MouseButton1Click:Connect(tweenToPlayer)

-- Carregar lista inicialmente
loadPlayersList()

-- Atualizar lista quando jogadores entrarem/sairem
Players.PlayerAdded:Connect(function()
    loadPlayersList()
end)

Players.PlayerRemoving:Connect(function()
    loadPlayersList()
end)

-- =============== ABA ESP ================
local ESP_Ativo = false
local espColor = Color3.fromRGB(170,0,255)
local caixas = {}

local function criarESP(jogador)
    if jogador == LocalPlayer then return end
    if caixas[jogador] then caixas[jogador]:Destroy(); caixas[jogador] = nil end
    if jogador.Character and jogador.Character:FindFirstChild("HumanoidRootPart") then
        local highlight = Instance.new("Highlight")
        highlight.FillColor = espColor
        highlight.OutlineColor = espColor
        highlight.FillTransparency = 0.8
        highlight.OutlineTransparency = 0.1
        highlight.Adornee = jogador.Character
        highlight.Parent = jogador.Character
        caixas[jogador] = highlight
    end
end
local function removerESP()
    for jogador, highlight in pairs(caixas) do
        if highlight and highlight.Parent then highlight:Destroy() end
    end
    caixas = {}
end
local function monitorarJogador(jogador)
    if jogador == LocalPlayer then return end
    jogador.CharacterAdded:Connect(function(char)
        if ESP_Ativo then criarESP(jogador) end
    end)
end
for _, jogador in ipairs(Players:GetPlayers()) do monitorarJogador(jogador) end
Players.PlayerAdded:Connect(monitorarJogador)
Players.PlayerAdded:Connect(function(jogador) if ESP_Ativo then criarESP(jogador) end end)
Players.PlayerRemoving:Connect(function(jogador)
    if caixas[jogador] then caixas[jogador]:Destroy(); caixas[jogador] = nil end
end)
RunService.RenderStepped:Connect(function()
    if ESP_Ativo then
        for _, jogador in ipairs(Players:GetPlayers()) do
            if jogador ~= LocalPlayer and jogador.Character and not caixas[jogador] then
                criarESP(jogador)
            elseif caixas[jogador] and caixas[jogador].FillColor ~= espColor then
                caixas[jogador].FillColor = espColor
                caixas[jogador].OutlineColor = espColor
            end
        end
    end
end)

-- Container para centralizar elementos ESP
local ESPContainer = Instance.new("Frame")
ESPContainer.Size = UDim2.new(1, 0, 1, 0)
ESPContainer.BackgroundTransparency = 1
ESPContainer.Parent = categoryFrames[1]

-- Texto de instrução
local espInfo = Instance.new("TextLabel")
espInfo.Size = UDim2.new(1, -20, 0, 50)
espInfo.Position = UDim2.new(0, 10, 0, 10)
espInfo.BackgroundTransparency = 1
espInfo.Text = "Pressione [H] para ativar/desativar o ESP\nEscolha a cor abaixo:"
espInfo.Font = Enum.Font.Gotham
espInfo.TextSize = 16
espInfo.TextColor3 = Color3.fromRGB(55, 20, 90)
espInfo.TextWrapped = true
espInfo.TextXAlignment = Enum.TextXAlignment.Center
espInfo.TextYAlignment = Enum.TextYAlignment.Center
espInfo.Parent = ESPContainer

-- Container para botões de cor
local ColorButtonsContainer = Instance.new("Frame")
ColorButtonsContainer.Size = UDim2.new(1, -20, 0, 28)
ColorButtonsContainer.Position = UDim2.new(0, 10, 0, 70)
ColorButtonsContainer.BackgroundTransparency = 1
ColorButtonsContainer.Parent = ESPContainer

local ColorButtonsLayout = Instance.new("UIListLayout")
ColorButtonsLayout.FillDirection = Enum.FillDirection.Horizontal
ColorButtonsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
ColorButtonsLayout.VerticalAlignment = Enum.VerticalAlignment.Center
ColorButtonsLayout.Padding = UDim.new(0, 10)
ColorButtonsLayout.Parent = ColorButtonsContainer

-- Botões de cor
local colorNames = {"Vermelho","Azul","Branco","Roxo"}
local colorValues = {Color3.fromRGB(255,0,0), Color3.fromRGB(0,90,255), Color3.fromRGB(255,255,255), Color3.fromRGB(170,0,255)}
for i=1,#colorNames do
    local colorBtn = Instance.new("TextButton")
    colorBtn.Size = UDim2.new(0, 75, 0, 28)
    colorBtn.BackgroundColor3 = colorValues[i]
    colorBtn.Text = colorNames[i]
    colorBtn.Font = Enum.Font.GothamBold
    colorBtn.TextSize = 14
    colorBtn.TextColor3 = (i == 3) and Color3.fromRGB(30,30,30) or Color3.fromRGB(255,255,255)
    colorBtn.Parent = ColorButtonsContainer
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = colorBtn
    colorBtn.MouseButton1Click:Connect(function()
        espColor = colorValues[i]
        for _,v in pairs(caixas) do
            v.FillColor = espColor
            v.OutlineColor = espColor
        end
    end)
end

-- Botão de toggle ESP
local espButton = Instance.new("TextButton")
espButton.Size = UDim2.new(0, 160, 0, 40)
espButton.Position = UDim2.new(0.5, -80, 1, -55)
espButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
espButton.TextColor3 = Color3.fromRGB(55, 20, 90)
espButton.Font = Enum.Font.GothamBold
espButton.TextSize = 20
espButton.Text = "Ativar ESP"
espButton.Parent = ESPContainer
local btnCorner = Instance.new("UICorner")
btnCorner.CornerRadius = UDim.new(0, 10)
btnCorner.Parent = espButton
espButton.MouseButton1Click:Connect(function()
    ESP_Ativo = not ESP_Ativo
    if ESP_Ativo then
        for _, jogador in ipairs(Players:GetPlayers()) do criarESP(jogador) end
        espButton.Text = "Desativar ESP"
        espButton.BackgroundColor3 = Color3.fromRGB(200,255,200)
    else
        removerESP()
        espButton.Text = "Ativar ESP"
        espButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
    end
end)
UIS.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.H then
        ESP_Ativo = not ESP_Ativo
        if ESP_Ativo then
            for _, jogador in ipairs(Players:GetPlayers()) do criarESP(jogador) end
            espButton.Text = "Desativar ESP"
            espButton.BackgroundColor3 = Color3.fromRGB(200,255,200)
        else
            removerESP()
            espButton.Text = "Ativar ESP"
            espButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
        end
    end
end)

-- =============== ABA AIMBOT ================
local aimbotEnabled = false
local aimbotModule -- referência para .Exit()

-- Container para centralizar elementos Aimbot
local AimbotContainer = Instance.new("Frame")
AimbotContainer.Size = UDim2.new(1, 0, 1, 0)
AimbotContainer.BackgroundTransparency = 1
AimbotContainer.Parent = categoryFrames[2]

local aimbotButton = Instance.new("TextButton")
aimbotButton.Size = UDim2.new(0, 160, 0, 40)
aimbotButton.Position = UDim2.new(0.5, -80, 0.3, 0)
aimbotButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
aimbotButton.TextColor3 = Color3.fromRGB(55, 20, 90)
aimbotButton.Font = Enum.Font.GothamBold
aimbotButton.TextSize = 20
aimbotButton.Text = "Ativar Aimbot"
aimbotButton.Parent = AimbotContainer
local btnCorner2 = Instance.new("UICorner")
btnCorner2.CornerRadius = UDim.new(0, 10)
btnCorner2.Parent = aimbotButton

local aimbotStatus = Instance.new("TextLabel")
aimbotStatus.Size = UDim2.new(1, -20, 0, 60)
aimbotStatus.Position = UDim2.new(0, 10, 0.55, 0)
aimbotStatus.BackgroundTransparency = 1
aimbotStatus.Text = "Status: Desativado"
aimbotStatus.TextColor3 = Color3.fromRGB(30, 30, 60)
aimbotStatus.Font = Enum.Font.Gotham
aimbotStatus.TextSize = 18
aimbotStatus.TextXAlignment = Enum.TextXAlignment.Center
aimbotStatus.Parent = AimbotContainer

-- Função para ativar o Aimbot Universal Exunys
local function activateAimbot()
    if aimbotModule and aimbotModule.Exit then aimbotModule:Exit() end
    --[[ Universal Aimbot Module by Exunys ]]
    local game, workspace = game, workspace
    local getrawmetatable, getmetatable, setmetatable, pcall, getgenv, next, tick = getrawmetatable, getmetatable, setmetatable, pcall, getgenv, next, tick
    local Vector2new, Vector3zero, CFramenew, Color3fromRGB, Color3fromHSV, Drawingnew, TweenInfonew = Vector2.new, Vector3.zero, CFrame.new, Color3.fromRGB, Color3.fromHSV, Drawing.new, TweenInfo.new
    local getupvalue, mousemoverel, tablefind, tableremove, stringlower, stringsub, mathclamp = debug.getupvalue, mousemoverel or (Input and Input.MouseMove), table.find, table.remove, string.lower, string.sub, math.clamp
    local GameMetatable = getrawmetatable and getrawmetatable(game) or {
        __index = function(self, Index) return self[Index] end, __newindex = function(self, Index, Value) self[Index] = Value end
    }
    local __index = GameMetatable.__index
    local __newindex = GameMetatable.__newindex
    local getrenderproperty, setrenderproperty = getrenderproperty or __index, setrenderproperty or __newindex
    local GetService = __index(game, "GetService")
    local RunService = GetService(game, "RunService")
    local UserInputService = GetService(game, "UserInputService")
    local TweenService = GetService(game, "TweenService")
    local Players = GetService(game, "Players")
    local LocalPlayer = __index(Players, "LocalPlayer")
    local Camera = __index(workspace, "CurrentCamera")
    local FindFirstChild, FindFirstChildOfClass = __index(game, "FindFirstChild"), __index(game, "FindFirstChildOfClass")
    local GetDescendants = __index(game, "GetDescendants")
    local WorldToViewportPoint = __index(Camera, "WorldToViewportPoint")
    local GetPartsObscuringTarget = __index(Camera, "GetPartsObscuringTarget")
    local GetMouseLocation = __index(UserInputService, "GetMouseLocation")
    local GetPlayers = __index(Players, "GetPlayers")
    local RequiredDistance, Typing, Running, ServiceConnections, Animation, OriginalSensitivity = 2000, false, false, {}
    local Connect, Disconnect = __index(game, "DescendantAdded").Connect
    if ExunysDeveloperAimbot and ExunysDeveloperAimbot.Exit then ExunysDeveloperAimbot:Exit() end

    getgenv().ExunysDeveloperAimbot = {
        DeveloperSettings = {
            UpdateMode = "RenderStepped",
            TeamCheckOption = "TeamColor",
            RainbowSpeed = 1
        },
        Settings = {
            Enabled = true,
            TeamCheck = false,
            AliveCheck = true,
            WallCheck = false,
            OffsetToMoveDirection = false,
            OffsetIncrement = 15,
            Sensitivity = 0,
            Sensitivity2 = 3.5,
            LockMode = 1,
            LockPart = "Head",
            TriggerKey = Enum.UserInputType.MouseButton2,
            Toggle = false
        },
        FOVSettings = {
            Enabled = true,
            Visible = true,
            Radius = 90,
            NumSides = 60,
            Thickness = 1,
            Transparency = 1,
            Filled = false,
            RainbowColor = false,
            RainbowOutlineColor = false,
            Color = Color3fromRGB(255, 255, 255),
            OutlineColor = Color3fromRGB(0, 0, 0),
            LockedColor = Color3fromRGB(255, 150, 150)
        },
        Blacklisted = {},
        FOVCircleOutline = Drawingnew("Circle"),
        FOVCircle = Drawingnew("Circle")
    }
    local Environment = getgenv().ExunysDeveloperAimbot
    setrenderproperty(Environment.FOVCircle, "Visible", false)
    setrenderproperty(Environment.FOVCircleOutline, "Visible", false)
    local FixUsername = function(String)
        local Result
        for _, Value in next, GetPlayers(Players) do
            local Name = __index(Value, "Name")
            if stringsub(stringlower(Name), 1, #String) == stringlower(String) then Result = Name end
        end
        return Result
    end
    local GetRainbowColor = function()
        local RainbowSpeed = Environment.DeveloperSettings.RainbowSpeed
        return Color3fromHSV(tick() % RainbowSpeed / RainbowSpeed, 1, 1)
    end
    local ConvertVector = function(Vector) return Vector2new(Vector.X, Vector.Y) end
    local CancelLock = function()
        Environment.Locked = nil
        local FOVCircle = Environment.FOVCircle
        setrenderproperty(FOVCircle, "Color", Environment.FOVSettings.Color)
        __newindex(UserInputService, "MouseDeltaSensitivity", OriginalSensitivity)
        if Animation then Animation:Cancel() end
    end
    local GetClosestPlayer = function()
        local Settings = Environment.Settings
        local LockPart = Settings.LockPart
        if not Environment.Locked then
            RequiredDistance = Environment.FOVSettings.Enabled and Environment.FOVSettings.Radius or 2000
            for _, Value in next, GetPlayers(Players) do
                local Character = __index(Value, "Character")
                local Humanoid = Character and FindFirstChildOfClass(Character, "Humanoid")
                if Value ~= LocalPlayer and not tablefind(Environment.Blacklisted, __index(Value, "Name")) and Character and FindFirstChild(Character, LockPart) and Humanoid then
                    local PartPosition, TeamCheckOption = __index(Character[LockPart], "Position"), Environment.DeveloperSettings.TeamCheckOption
                    if Settings.TeamCheck and __index(Value, TeamCheckOption) == __index(LocalPlayer, TeamCheckOption) then continue end
                    if Settings.AliveCheck and __index(Humanoid, "Health") <= 0 then continue end
                    if Settings.WallCheck then
                        local BlacklistTable = GetDescendants(__index(LocalPlayer, "Character"))
                        for _, Value in next, GetDescendants(Character) do BlacklistTable[#BlacklistTable + 1] = Value end
                        if #GetPartsObscuringTarget(Camera, {PartPosition}, BlacklistTable) > 0 then continue end
                    end
                    local Vector, OnScreen, Distance = WorldToViewportPoint(Camera, PartPosition)
                    Vector = ConvertVector(Vector)
                    Distance = (GetMouseLocation(UserInputService) - Vector).Magnitude
                    if Distance < RequiredDistance and OnScreen then
                        RequiredDistance, Environment.Locked = Distance, Value
                    end
                end
            end
        elseif (GetMouseLocation(UserInputService) - ConvertVector(WorldToViewportPoint(Camera, __index(__index(__index(Environment.Locked, "Character"), LockPart), "Position")))).Magnitude > RequiredDistance then
            CancelLock()
        end
    end
    local Load = function()
        OriginalSensitivity = __index(UserInputService, "MouseDeltaSensitivity")
        local Settings, FOVCircle, FOVCircleOutline, FOVSettings, Offset = Environment.Settings, Environment.FOVCircle, Environment.FOVCircleOutline, Environment.FOVSettings
        ServiceConnections.RenderSteppedConnection = Connect(__index(RunService, Environment.DeveloperSettings.UpdateMode), function()
            local OffsetToMoveDirection, LockPart = Settings.OffsetToMoveDirection, Settings.LockPart
            if FOVSettings.Enabled and Settings.Enabled then
                for Index, Value in next, FOVSettings do
                    if Index == "Color" then continue end
                    if pcall(getrenderproperty, FOVCircle, Index) then
                        setrenderproperty(FOVCircle, Index, Value)
                        setrenderproperty(FOVCircleOutline, Index, Value)
                    end
                end
                setrenderproperty(FOVCircle, "Color", (Environment.Locked and FOVSettings.LockedColor) or FOVSettings.RainbowColor and GetRainbowColor() or FOVSettings.Color)
                setrenderproperty(FOVCircleOutline, "Color", FOVSettings.RainbowOutlineColor and GetRainbowColor() or FOVSettings.OutlineColor)
                setrenderproperty(FOVCircleOutline, "Thickness", FOVSettings.Thickness + 1)
                setrenderproperty(FOVCircle, "Position", GetMouseLocation(UserInputService))
                setrenderproperty(FOVCircleOutline, "Position", GetMouseLocation(UserInputService))
            else
                setrenderproperty(FOVCircle, "Visible", false)
                setrenderproperty(FOVCircleOutline, "Visible", false)
            end
            if Running and Settings.Enabled then
                GetClosestPlayer()
                Offset = OffsetToMoveDirection and __index(FindFirstChildOfClass(__index(Environment.Locked, "Character"), "Humanoid"), "MoveDirection") * (mathclamp(Settings.OffsetIncrement, 1, 30) / 10) or Vector3zero
                if Environment.Locked then
                    local LockedPosition_Vector3 = __index(__index(Environment.Locked, "Character")[LockPart], "Position")
                    local LockedPosition = WorldToViewportPoint(Camera, LockedPosition_Vector3 + Offset)
                    if Environment.Settings.LockMode == 2 then
                        mousemoverel((LockedPosition.X - GetMouseLocation(UserInputService).X) / Settings.Sensitivity2, (LockedPosition.Y - GetMouseLocation(UserInputService).Y) / Settings.Sensitivity2)
                    else
                        if Settings.Sensitivity > 0 then
                            Animation = TweenService:Create(Camera, TweenInfonew(Environment.Settings.Sensitivity, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {CFrame = CFramenew(Camera.CFrame.Position, LockedPosition_Vector3)})
                            Animation:Play()
                        else
                            __newindex(Camera, "CFrame", CFramenew(Camera.CFrame.Position, LockedPosition_Vector3 + Offset))
                        end
                        __newindex(UserInputService, "MouseDeltaSensitivity", 0)
                    end
                    setrenderproperty(FOVCircle, "Color", FOVSettings.LockedColor)
                end
            end
        end)
        ServiceConnections.InputBeganConnection = Connect(__index(UserInputService, "InputBegan"), function(Input)
            local TriggerKey, Toggle = Settings.TriggerKey, Settings.Toggle
            if Typing then return end
            if Input.UserInputType == Enum.UserInputType.Keyboard and Input.KeyCode == TriggerKey or Input.UserInputType == TriggerKey then
                if Toggle then
                    Running = not Running
                    if not Running then CancelLock() end
                else
                    Running = true
                end
            end
        end)
        ServiceConnections.InputEndedConnection = Connect(__index(UserInputService, "InputEnded"), function(Input)
            local TriggerKey, Toggle = Settings.TriggerKey, Settings.Toggle
            if Toggle or Typing then return end
            if Input.UserInputType == Enum.UserInputType.Keyboard and Input.KeyCode == TriggerKey or Input.UserInputType == TriggerKey then
                Running = false
                CancelLock()
            end
        end)
    end
    ServiceConnections.TypingStartedConnection = Connect(__index(UserInputService, "TextBoxFocused"), function() Typing = true end)
    ServiceConnections.TypingEndedConnection = Connect(__index(UserInputService, "TextBoxFocusReleased"), function() Typing = false end)
    function Environment.Exit(self)
        assert(self, "EXUNYS_AIMBOT-V3.Exit: Missing parameter #1 \"self\" <table>.")
        for Index, _ in next, ServiceConnections do Disconnect(ServiceConnections[Index]) end
        Load = nil; ConvertVector = nil; CancelLock = nil; GetClosestPlayer = nil; GetRainbowColor = nil; FixUsername = nil
        self.FOVCircle:Remove()
        self.FOVCircleOutline:Remove()
        getgenv().ExunysDeveloperAimbot = nil
    end
    function Environment.Restart()
        for Index, _ in next, ServiceConnections do Disconnect(ServiceConnections[Index]) end
        Load()
    end
    function Environment.Blacklist(self, Username)
        assert(self, "EXUNYS_AIMBOT-V3.Blacklist: Missing parameter #1 \"self\" <table>.")
        assert(Username, "EXUNYS_AIMBOT-V3.Blacklist: Missing parameter #2 \"Username\" <string>.")
        Username = FixUsername(Username)
        assert(self, "EXUNYS_AIMBOT-V3.Blacklist: User "..Username.." couldn't be found.")
        self.Blacklisted[#self.Blacklisted + 1] = Username
    end
    function Environment.Whitelist(self, Username)
        assert(self, "EXUNYS_AIMBOT-V3.Whitelist: Missing parameter #1 \"self\" <table>.")
        assert(Username, "EXUNYS_AIMBOT-V3.Whitelist: Missing parameter #2 \"Username\" <string>.")
        Username = FixUsername(Username)
        assert(Username, "EXUNYS_AIMBOT-V3.Whitelist: User "..Username.." couldn't be found.")
        local Index = tablefind(self.Blacklisted, Username)
        assert(Index, "EXUNYS_AIMBOT-V3.Whitelist: User "..Username.." is not blacklisted.")
        tableremove(self.Blacklisted, Index)
    end
    function Environment.GetClosestPlayer()
        GetClosestPlayer()
        local Value = Environment.Locked
        CancelLock()
        return Value
    end
    Environment.Load = Load
    setmetatable(Environment, {__call = Load})
    aimbotModule = Environment
    aimbotModule:Load()
end

local function deactivateAimbot()
    if aimbotModule and aimbotModule.Exit then
        aimbotModule:Exit()
        aimbotModule = nil
    end
end

aimbotButton.MouseButton1Click:Connect(function()
    if not aimbotEnabled then
        activateAimbot()
        aimbotEnabled = true
        aimbotButton.Text = "Desativar Aimbot"
        aimbotButton.BackgroundColor3 = Color3.fromRGB(200,255,200)
        aimbotStatus.Text = "Status: Ativado"
    else
        deactivateAimbot()
        aimbotEnabled = false
        aimbotButton.Text = "Ativar Aimbot"
        aimbotButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
        aimbotStatus.Text = "Status: Desativado"
    end
end)
MainFrame:GetPropertyChangedSignal("Visible"):Connect(function()
    if not MainFrame.Visible and aimbotEnabled then
        deactivateAimbot()
        aimbotButton.Text = "Ativar Aimbot"
        aimbotButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
        aimbotStatus.Text = "Status: Desativado"
        aimbotEnabled = false
    end
end)

-- =============== ABA MISC ================
local humanoid = nil
local noclipEnabled = false
local infiniteJumpEnabled = false
local invisibleEnabled = false
local noclipConnection = nil
local jumpConnection = nil
local originalTransparency = {}

local function getHumanoid()
    if not LocalPlayer.Character then return nil end
    local h = LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
    return h
end

-- Função para garantir que as configurações sejam aplicadas mesmo após respawn
local function applyMiscSettings()
    humanoid = getHumanoid()
    if humanoid then
        -- Aplicar configurações de velocidade e pulo
        for _, child in ipairs(MiscContainer:GetChildren()) do
            if child:IsA("Frame") and child.Name == "SliderContainer" then
                local valueLabel = child:FindFirstChild("ValueLabel")
                if valueLabel then
                    local value = tonumber(valueLabel.Text)
                    if child:FindFirstChild("WalkSpeedLabel") then
                        humanoid.WalkSpeed = value
                    elseif child:FindFirstChild("JumpPowerLabel") then
                        humanoid.JumpPower = value
                    end
                end
            end
        end
        
        -- Reaplicar noclip se estiver ativado
        if noclipEnabled then
            enableNoclip()
        end
        
        -- Reaplicar invisibilidade se estiver ativado
        if invisibleEnabled then
            enableInvisibility()
        end
    end
end

-- Container para centralizar elementos Misc
local MiscContainer = Instance.new("Frame")
MiscContainer.Size = UDim2.new(1, 0, 1, 0)
MiscContainer.BackgroundTransparency = 1
MiscContainer.Parent = categoryFrames[3]

-- Layout para organizar os elementos
local MiscLayout = Instance.new("UIListLayout")
MiscLayout.Padding = UDim.new(0, 10)
MiscLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
MiscLayout.VerticalAlignment = Enum.VerticalAlignment.Top
MiscLayout.SortOrder = Enum.SortOrder.LayoutOrder
MiscLayout.Parent = MiscContainer

-- Título da seção de ajustes
local adjustmentsTitle = Instance.new("TextLabel")
adjustmentsTitle.Size = UDim2.new(0.8, 0, 0, 25)
adjustmentsTitle.BackgroundTransparency = 1
adjustmentsTitle.Text = "AJUSTES"
adjustmentsTitle.Font = Enum.Font.GothamBold
adjustmentsTitle.TextSize = 16
adjustmentsTitle.TextColor3 = Color3.fromRGB(55, 20, 90)
adjustmentsTitle.TextXAlignment = Enum.TextXAlignment.Center
adjustmentsTitle.LayoutOrder = 1
adjustmentsTitle.Parent = MiscContainer

local function makeSlider(labelText, minValue, maxValue, defaultValue, layoutOrder, callback, identifier)
    local sliderContainer = Instance.new("Frame")
    sliderContainer.Size = UDim2.new(0.8, 0, 0, 50)
    sliderContainer.BackgroundTransparency = 1
    sliderContainer.LayoutOrder = layoutOrder
    sliderContainer.Parent = MiscContainer
    sliderContainer.Name = "SliderContainer"

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.4, 0, 0, 28)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = labelText
    label.Font = Enum.Font.GothamBold
    label.TextSize = 15
    label.TextColor3 = Color3.fromRGB(55, 20, 90)
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = sliderContainer
    label.Name = identifier .. "Label"

    local sliderBG = Instance.new("Frame")
    sliderBG.Size = UDim2.new(0.4, 0, 0, 10)
    sliderBG.Position = UDim2.new(0.4, 0, 0, 8)
    sliderBG.BackgroundColor3 = Color3.fromRGB(220,220,240)
    sliderBG.BorderSizePixel = 0
    sliderBG.Parent = sliderContainer
    local bgCorner = Instance.new("UICorner")
    bgCorner.CornerRadius = UDim.new(0,5)
    bgCorner.Parent = sliderBG

    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new((defaultValue-minValue)/(maxValue-minValue), 0, 1, 0)
    sliderFill.BackgroundColor3 = Color3.fromRGB(170,0,255)
    sliderFill.BorderSizePixel = 0
    sliderFill.Parent = sliderBG
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0,5)
    fillCorner.Parent = sliderFill

    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0,16,0,16)
    knob.Position = UDim2.new((defaultValue-minValue)/(maxValue-minValue), -8, 0.5, -8)
    knob.BackgroundColor3 = Color3.fromRGB(120,0,180)
    knob.Parent = sliderBG
    local knobCorner = Instance.new("UICorner")
    knobCorner.CornerRadius = UDim.new(1,0)
    knobCorner.Parent = knob

    local valueLabel = Instance.new("TextLabel")
    valueLabel.Size = UDim2.new(0.2, 0, 0, 18)
    valueLabel.Position = UDim2.new(0.8, 0, 0, 0)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = tostring(defaultValue)
    valueLabel.Font = Enum.Font.Gotham
    valueLabel.TextSize = 14
    valueLabel.TextColor3 = Color3.fromRGB(55, 20, 90)
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.Parent = sliderContainer
    valueLabel.Name = "ValueLabel"

    local dragging = false
    local function setValueFromX(x)
        local rel = math.clamp((x-sliderBG.AbsolutePosition.X)/sliderBG.AbsoluteSize.X, 0, 1)
        local value = math.floor((minValue + (maxValue-minValue)*rel) * 100) / 100
        sliderFill.Size = UDim2.new(rel,0,1,0)
        knob.Position = UDim2.new(rel, -8, 0.5, -8)
        valueLabel.Text = tostring(value)
        callback(value)
    end
    
    knob.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
        end
    end)
    
    UIS.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    UIS.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            setValueFromX(input.Position.X)
        end
    end)
    
    sliderBG.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            setValueFromX(input.Position.X)
            dragging = true
        end
    end)
    
    callback(defaultValue)
end

-- Título da seção de habilidades
local abilitiesTitle = Instance.new("TextLabel")
abilitiesTitle.Size = UDim2.new(0.8, 0, 0, 25)
abilitiesTitle.BackgroundTransparency = 1
abilitiesTitle.Text = "HABILIDADES"
abilitiesTitle.Font = Enum.Font.GothamBold
abilitiesTitle.TextSize = 16
abilitiesTitle.TextColor3 = Color3.fromRGB(55, 20, 90)
abilitiesTitle.TextXAlignment = Enum.TextXAlignment.Center
abilitiesTitle.LayoutOrder = 4
abilitiesTitle.Parent = MiscContainer

-- Função Noclip
local function enableNoclip()
    if noclipConnection then
        noclipConnection:Disconnect()
        noclipConnection = nil
    end
    
    noclipConnection = RunService.Stepped:Connect(function()
        if noclipEnabled and LocalPlayer.Character then
            for _, part in ipairs(LocalPlayer.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end)
end

local function disableNoclip()
    if noclipConnection then
        noclipConnection:Disconnect()
        noclipConnection = nil
    end
    
    if LocalPlayer.Character then
        for _, part in ipairs(LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end

-- Botão Noclip
local noclipButton = Instance.new("TextButton")
noclipButton.Size = UDim2.new(0.7, 0, 0, 40)
noclipButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
noclipButton.TextColor3 = Color3.fromRGB(55, 20, 90)
noclipButton.Font = Enum.Font.GothamBold
noclipButton.TextSize = 18
noclipButton.Text = "Ativar Noclip"
noclipButton.LayoutOrder = 5
noclipButton.Parent = MiscContainer
local noclipCorner = Instance.new("UICorner")
noclipCorner.CornerRadius = UDim.new(0, 10)
noclipCorner.Parent = noclipButton

noclipButton.MouseButton1Click:Connect(function()
    noclipEnabled = not noclipEnabled
    if noclipEnabled then
        noclipButton.Text = "Desativar Noclip"
        noclipButton.BackgroundColor3 = Color3.fromRGB(200,255,200)
        enableNoclip()
    else
        noclipButton.Text = "Ativar Noclip"
        noclipButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
        disableNoclip()
    end
end)

-- Função Pulo Infinito
local function enableInfiniteJump()
    if jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
    end
    
    jumpConnection = UIS.JumpRequest:Connect(function()
        if infiniteJumpEnabled and humanoid then
            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end)
end

local function disableInfiniteJump()
    if jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
    end
end

-- Botão Pulo Infinito
local infiniteJumpButton = Instance.new("TextButton")
infiniteJumpButton.Size = UDim2.new(0.7, 0, 0, 40)
infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
infiniteJumpButton.TextColor3 = Color3.fromRGB(55, 20, 90)
infiniteJumpButton.Font = Enum.Font.GothamBold
infiniteJumpButton.TextSize = 18
infiniteJumpButton.Text = "Ativar Pulo Infinito"
infiniteJumpButton.LayoutOrder = 6
infiniteJumpButton.Parent = MiscContainer
local infiniteJumpCorner = Instance.new("UICorner")
infiniteJumpCorner.CornerRadius = UDim.new(0, 10)
infiniteJumpCorner.Parent = infiniteJumpButton

infiniteJumpButton.MouseButton1Click:Connect(function()
    infiniteJumpEnabled = not infiniteJumpEnabled
    if infiniteJumpEnabled then
        infiniteJumpButton.Text = "Desativar Pulo Infinito"
        infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(200,255,200)
        enableInfiniteJump()
    else
        infiniteJumpButton.Text = "Ativar Pulo Infinito"
        infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
        disableInfiniteJump()
    end
end)

-- Função Invisibilidade
local function enableInvisibility()
    if LocalPlayer.Character then
        -- Salvar transparências originais
        originalTransparency = {}
        
        for _, part in ipairs(LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                originalTransparency[part] = part.Transparency
                -- Totalmente invisível para outros jogadores (transparência máxima)
                part.Transparency = 1
                
                -- Para o jogador local, apenas um pouco transparente
                if part:IsA("Part") or part:IsA("MeshPart") then
                    local highlight = Instance.new("Highlight")
                    highlight.FillColor = Color3.fromRGB(100, 100, 255)
                    highlight.OutlineColor = Color3.fromRGB(50, 50, 200)
                    highlight.FillTransparency = 0.7
                    highlight.OutlineTransparency = 0.3
                    highlight.Adornee = part
                    highlight.Parent = part
                end
            end
        end
    end
end

local function disableInvisibility()
    if LocalPlayer.Character then
        for _, part in ipairs(LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                -- Restaurar transparência original
                if originalTransparency[part] then
                    part.Transparency = originalTransparency[part]
                else
                    part.Transparency = 0
                end
                
                -- Remover highlight
                for _, child in ipairs(part:GetChildren()) do
                    if child:IsA("Highlight") then
                        child:Destroy()
                    end
                end
            end
        end
        originalTransparency = {}
    end
end

-- Botão Invisibilidade
local invisibleButton = Instance.new("TextButton")
invisibleButton.Size = UDim2.new(0.7, 0, 0, 40)
invisibleButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
invisibleButton.TextColor3 = Color3.fromRGB(55, 20, 90)
invisibleButton.Font = Enum.Font.GothamBold
invisibleButton.TextSize = 18
invisibleButton.Text = "Ativar Invisibilidade"
invisibleButton.LayoutOrder = 7
invisibleButton.Parent = MiscContainer
local invisibleCorner = Instance.new("UICorner")
invisibleCorner.CornerRadius = UDim.new(0, 10)
invisibleCorner.Parent = invisibleButton

invisibleButton.MouseButton1Click:Connect(function()
    invisibleEnabled = not invisibleEnabled
    if invisibleEnabled then
        invisibleButton.Text = "Desativar Invisibilidade"
        invisibleButton.BackgroundColor3 = Color3.fromRGB(200,255,200)
        enableInvisibility()
    else
        invisibleButton.Text = "Ativar Invisibilidade"
        invisibleButton.BackgroundColor3 = Color3.fromRGB(220,200,255)
        disableInvisibility()
    end
end)

-- Sliders de Velocidade e Pulo
makeSlider("Velocidade:", 16, 100, 16, 2, function(val)
    humanoid = getHumanoid()
    if humanoid then
        humanoid.WalkSpeed = val
    end
end, "WalkSpeed")

makeSlider("Pulo:", 16, 150, 50, 3, function(val)
    humanoid = getHumanoid()
    if humanoid then
        humanoid.JumpPower = val
    end
end, "JumpPower")

-- Atualiza sempre que o personagem respawnar
LocalPlayer.CharacterAdded:Connect(function(char)
    humanoid = getHumanoid()
    applyMiscSettings()
    
    -- Reconectar noclip se estiver ativado
    if noclipEnabled then
        enableNoclip()
    end
    
    -- Reconectar pulo infinito se estiver ativado
    if infiniteJumpEnabled then
        enableInfiniteJump()
    end
    
    -- Reaplicar invisibilidade se estiver ativado
    if invisibleEnabled then
        enableInvisibility()
    end
end)

-- Aplicar configurações iniciais
humanoid = getHumanoid()
if humanoid then
    applyMiscSettings()
end

